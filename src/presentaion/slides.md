---

marp: true

theme: default

paginate: true

---



# Архитектура системы Food Tech



**Роль**: Архитектор приложений и решений **Кондратов Александр**

**Проект**: Автоматизация работы фуд‑траков с возможностью модификации рецептов



---



## Бизнес‑контекст



- **Цель стартапа**: приготовление блюд с возможностью модификации рецептов в непосредственной близости к пользователю

- **Ключевая ценность**: индивидуальные рецепты → основная прибыль

- IT‑система — надёжный каркас, а не цель



---



## Исходные требования


Мобильный интерфейс повара — минимум кликов
Умная маршрутизация фуд‑траков
Кастомизация рецептов (ингредиенты)
Автоматическое снабжение
Уведомления клиентов и оплата в приложении
Интеграции: бухгалтерия, закупки, лояльность
Аналитика по продажам и маршрутам
Оптимизация стоимость и скорости разработки MVP

---
## Высокоуровневая архитектура



![50%](../dfd/dfd.drawio.svg)



> **Рисунок**: DFD (Data Flow Diagram) — потоки данных между клиентами, траками, поддержкой.



---



## Доменные модели



![Class Diagram left contain](../classDiagram.svg)



> **Рисунок**: Class Diagram — основные сущности: Orders, Trucks, Users, Recipes.



---


## Прогноз нагрузки

 <div style="display: grid; grid-template-columns: repeat(3, 1fr);">
   <div style="font-size: 21px; display: flex; flex-direction:column; justify-content: space-between">
кол-во мест скопления людей в городе

- 73 станции метро
- 964 парка, сада и сквера
- 246 торговых объектов
- 200 музеев
- 70 театров
- 50 кинотеатров
- 5 вокзалов

<b style="font-size: 29px;">

итого: 1600 объектов
</b>
</div>

<div style="display: flex; flex-direction:column; justify-content: space-between">

400 фуд траков * 12 заказов в час = 48 000 заказов в час
13 заказов в секунду
</br>
<b>13 транзакций записи в секунду, в самые загруженные часы.</b>

</div>
<div  style="display: flex; flex-direction:column; justify-content: space-between">
400 фуд. траков * 12 заказов в час * 10 коэф. Ищущих пользователей * 100 запросов на сессию в час  = 4800000 запросов в час на чтение
</br>
<b>1300 запросов на чтение в секунду</b>
</div>
</div>

---
## Прогноз возможностей системы (postgresql)
<div style="display: flex; justify-content: space-between; gap: 20px">
<div>
Операции на запись
</br>
pgbench -c 16 -j 4 -T 60 --protocol=prepared --builtin=simple-update pgbench
</br>
</br>
tps = 19621.686927
</div>

<div>
Операции на чтение
</br>
pgbench -c 16 -j 4 -T 60 --protocol=prepared --builtin=select pgbench
</br>
</br>
tps = 266352.589906
</div>
</div>

---

## Развёртывание и инфраструктура






> **Рисунок**: Deployment Diagram — сервисы (API, Web, DB), мобильные клиенты, брокер сообщений, CDN.

---

##

![Deployment bg top contain](../deploy.svg)

---

## Нефункциональные качества



- **Быстрый выход в прод, непрерывное развертывание**

  - Микросервисы + Docker + CI/CD (Jenkins → Kubernetes), Yandex Cloud

- **Лёгкая модификация**

  - Чёткие контракты API (OpenAPI), независимые сервисы

- **Масштабируемость**

  - Автоскейлинг, кэширование (Redis), CDN для статики, разбиение по городам



---



## Интеграции и безопасность


- Аутентификация: Аутентификация через vkontakte, google и других...

- Платежи и лояльность: API платёжного провайдера

- Бухгалтерия & закупки: интеграции с 1C, система нотификаций и оповещений с фуд-траков

- Шифрование трафика и данных (TLS, AES)



---



## Аналитика и мониторинг



- Метрики маршрутов, продаж, остатки

- Дашборды (Grafana, ClickHouse), логирование (ELK)

- Нотификации на отклонения в запасах и нагрузке



---



## Дорожная карта



1. MVP : регистрация, меню, возможность кастомизации существующих рецептов, оплата, навигация фуд траков.

2. Развитие: Реализация заявленного функционала в порядке приоритетов

3. Масштабирование в другие города



---



# Спасибо за внимание!



Вопросы?
